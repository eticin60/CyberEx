<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberEx - HesabÄ±m</title>
    <link rel="icon" type="image/png" href="assets/images/logo.png">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/account.css">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>

<body class="dashboard-page">
    <div class="top-contact-bar" style="display: flex; justify-content: space-between; padding: 0 20px;">
        <div class="contact-info-left" style="display: flex; gap: 20px; align-items: center;">
            <span>ðŸ“§ iletisim@cyberex.com.tr</span>
            <div class="live-activity-box">
                <div class="live-dot"></div>
                <span id="liveTxCount">LIVE: 1,842 TX/S</span>
            </div>
            <a href="status.html" class="system-status-pill">SÄ°STEM: AKTÄ°F</a>
        </div>

        <!-- User Nav Moved Here -->
        <div class="nav-right-group" id="userNav" style="display: flex; align-items: center;">
            <!-- home-nav.js fetches content here -->
        </div>
    </div>

    <!-- Background Animation Layer (Synced with Index) -->
    <div class="bg-animated">
        <div class="circuit-board"></div>
        <div class="circuit-nodes" id="circuitNodes"></div>
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
        <canvas id="particles-canvas"></canvas>
        <canvas id="network-canvas"></canvas>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <a href="index.html" class="nav-logo-center">
            <img src="cyberex-logo.png" alt="CyberEx Logo" style="height: 40px;">
            <div class="nav-tagline">AI POWERED FINTECH</div>
        </a>

        <div class="nav-links">
            <a href="#" class="nav-link disabled-link" onclick="return false;">PÄ°YASALAR <span
                    class="nav-badge-soon">YAKINDA</span></a>
            <a href="#" class="nav-link disabled-link" onclick="return false;">CÃœZDAN <span
                    class="nav-badge-soon">YAKINDA</span></a>

            <!-- Account page usually doesn't need 'Download App' in center if logged in, but we act consistent with index's center logic which home-nav.js hides if logged in -->
            <a href="download.html" class="nav-btn-filled" id="navDownloadBtn"
                style="margin: 0 15px; background: #00f0ff; color: #000; padding: 12px 28px; border-radius: 50px; font-weight: 900; font-size: 1rem; box-shadow: 0 0 25px rgba(0, 240, 255, 0.5); text-transform: uppercase;"
                data-tr="UYGULAMA Ä°NDÄ°R" data-en="DOWNLOAD APP">UYGULAMA Ä°NDÄ°R</a>

            <a href="#" class="nav-link disabled-link" onclick="return false;">EKOSÄ°STEM <span
                    class="nav-badge-soon">YAKINDA</span></a>
            <a href="#" class="nav-link disabled-link" onclick="return false;">DESTEK <span
                    class="nav-badge-soon">YAKINDA</span></a>
        </div>
    </nav>

    <main class="dashboard-content">
        <div class="container">
            <!-- Security Warning Banner (Hidden by default) -->
            <div id="securityBanner" class="security-alert" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i>
                <div class="alert-content">
                    <h4>Ã‡ekim Ä°ÅŸlemleri KÄ±sÄ±tlandÄ±</h4>
                    <p id="securityReason">GÃ¼venlik deÄŸiÅŸikliÄŸi nedeniyle 48 saat boyunca Ã§ekim yapamazsÄ±nÄ±z.</p>
                    <span id="securityTimer" class="timer">Kalan SÃ¼re: --:--</span>
                </div>
            </div>

            <!-- Top Section: Profile Header -->
            <section class="profile-header-card reveal">
                <div class="profile-main-info">
                    <div class="avatar-large-container">
                        <div class="avatar-large" id="mainAvatar">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <button class="edit-avatar-btn" onclick="openAvatarModal()">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <div class="profile-text">
                        <h1 id="displayName">KullanÄ±cÄ± AdÄ±</h1>
                        <p id="displayEmail">email@example.com</p>
                        <div class="badges" id="badgeContainer">
                            <!-- Badges will be injected here -->
                        </div>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="label">Cyber ID</span>
                        <div class="id-copy" onclick="copyCyberId()">
                            <span id="cyberId">---------</span>
                            <i class="far fa-copy"></i>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="label">VIP Seviyesi</span>
                        <span class="value" id="vipLevel">Lvl 1</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">KYC Durumu</span>
                        <span class="status-badge" id="kycStatus">DoÄŸrulanmadÄ±</span>
                    </div>
                </div>
            </section>

            <div class="dashboard-grid">
                <!-- Left Column: Wallet & Positions -->
                <div class="grid-left">
                    <!-- Wallet Card -->
                    <section class="glass-card wallet-card reveal" id="wallet">
                        <div class="card-header">
                            <h2><i class="fas fa-wallet"></i> CÃ¼zdan Ã–zeti</h2>
                            <a href="#" class="view-all">TÃ¼mÃ¼ <i class="fas fa-arrow-right"></i></a>
                        </div>
                        <div class="balance-display">
                            <span class="label">Toplam VarlÄ±k (USDT)</span>
                            <div class="amount-row">
                                <span class="currency">$</span>
                                <span class="amount" id="totalBalance">0.00</span>
                            </div>
                            <div class="balance-split">
                                <div class="split-item">
                                    <span>Spot</span>
                                    <strong id="spotBalance">$0.00</strong>
                                </div>
                                <div class="split-item">
                                    <span>Futures</span>
                                    <strong id="futuresBalance">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pnl-summary" id="pnlSummary">
                            <span>GÃ¼nlÃ¼k Kar/Zarar</span>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span class="pnl-value" id="dailyPnl">+$0.00 (0.00%)</span>
                                <button class="btn-icon-sm" onclick="sharePnl()" title="PNL PaylaÅŸ">
                                    <i class="fas fa-share-alt"></i>
                                </button>
                            </div>
                        </div>
                    </section>

                    <!-- Positions Card -->
                    <section class="glass-card positions-card reveal">
                        <div class="card-header">
                            <h2><i class="fas fa-chart-line"></i> AÃ§Ä±k Pozisyonlar</h2>
                            <span class="count-badge" id="positionCount">0</span>
                        </div>
                        <div class="positions-list" id="positionsContainer">
                            <div class="empty-state">
                                <i class="fas fa-stream"></i>
                                <p>AÃ§Ä±k pozisyon bulunamadÄ±</p>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Right Column: Messages & Quick Settings -->
                <div class="grid-right">
                    <!-- Notifications Card -->
                    <section class="glass-card messages-card reveal" id="messages">
                        <div class="card-header">
                            <h2><i class="fas fa-bell"></i> Bildirimler</h2>
                        </div>
                        <div class="notifications-list" id="notificationsContainer">
                            <!-- Notifications will be injected here -->
                        </div>
                    </section>

                    <!-- Settings & Security Card -->
                    <section class="glass-card settings-card reveal" id="settings">
                        <div class="card-header">
                            <h2><i class="fas fa-user-shield"></i> GÃ¼venlik & Ayarlar</h2>
                        </div>

                        <form id="settingsForm" class="settings-form">
                            <!-- Phone Number -->
                            <div class="form-group">
                                <label>Telefon NumarasÄ±</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-phone"></i>
                                    <input type="tel" id="phoneInput" placeholder="+90 555 000 0000" readonly>
                                    <button type="button" class="btn-icon" onclick="togglePhoneEdit()"
                                        title="DeÄŸiÅŸtir (48s KÄ±sÄ±tlama)">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                                <small class="info-text"><i class="fas fa-info-circle"></i> DeÄŸiÅŸiklik sonrasÄ± 48 saat
                                    Ã§ekim kÄ±sÄ±tlamasÄ± uygulanÄ±r.</small>
                            </div>

                            <!-- Password Change -->
                            <div class="form-group">
                                <label>Yeni Åžifre</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-lock"></i>
                                    <button type="submit" class="btn btn-primary full-width">
                                        <i class="fas fa-save"></i> DeÄŸiÅŸiklikleri Kaydet
                                    </button>
                        </form>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal: Position Close Confirmation -->
    <div id="closeModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-exclamation-triangle"></i> Acil Pozisyon Kapatma</h3>
            <p>Bu pozisyonu piyasa fiyatÄ±ndan kapatmak istediÄŸinize emin misiniz?</p>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal()">Ä°ptal</button>
                <button class="btn btn-danger" id="confirmCloseBtn">Evet, Kapat</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/firebase-config.js"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/home-nav.js"></script>
    <script src="assets/js/account.js"></script>
</body>

</html>